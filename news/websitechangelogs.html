<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Moonlett - Change logs</title>
    <meta name="description" content="Moonlett's website" />
    <meta name="author" content="Moonlett" />

    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.15.4/css/all.css" crossorigin="anonymous">
    <link rel="icon" href="/images/moonlettlogo.png" type="image/x-icon" />
    <link rel="stylesheet" href="/style.css" />
    <link rel="stylesheet" href="/home.css" />
    <link rel="stylesheet" href="news.css" />
</head>

<body>
    <nav class="navbar">
        <div class="nav-left">
            <a href="/" class="logo">
                <img src="/images/moonlettlogo.png" alt="Moonlett" class="logoimg" />
            </a>
        </div>

        <div class="nav-center">
            <ul class="main-links">
                <li><a href="/index.html">Home</a></li>
                Whats New?
                <li><a href="/games/games.html">Games</a></li>
            </ul>
        </div>

        <div class="nav-right">
            <ul class="main-links">
                <li><a href="/news/news.html">News</a></li>
                <li><a href="/about/about.html">About</a></li>
            </ul>
        </div>
    </nav>

    <main class="changelog">
        <h1>Changelog</h1>
        <div id="release-list">
            <p>Loading releases...</p>
        </div>
    </main>


    <footer class="footer">
        <div class="footer-content">
            <p class="footer-text">(2025) Moonlett.com</p>
            <ul class="footer-links">
                <li>
                    <a href="https://discord.gg/mHcZ237M84" target="_blank" aria-label="Join us on Discord">
                        <i class="fab fa-discord"></i>
                    </a>
                </li>
            </ul>
        </div>
    </footer>

    <script src="/script.js"></script>

    <script>
        const repo = "xmoonlett/moonlett";
        const releaseList = document.getElementById("release-list");

        fetch(`https://api.github.com/repos/${repo}/releases`)
            .then(res => res.json())
            .then(data => {
                releaseList.innerHTML = ""; // Clear loading text
                if (data.length === 0) {
                    releaseList.innerHTML = "<p>No releases found.</p>";
                    return;
                }

                data.forEach(release => {
                    const div = document.createElement("div");
                    div.classList.add("release-entry");
                    div.innerHTML = `
                <h2>${release.name || release.tag_name}</h2>
                <p><strong>Published:</strong> ${new Date(release.published_at).toLocaleDateString()}</p>
                <p>${release.body.replace(/\n/g, "<br>")}</p>
                <hr>
            `;
                    releaseList.appendChild(div);
                });
            })
            .catch(err => {
                releaseList.innerHTML = "<p>Error loading releases.</p>";
                console.error(err);
            });
    </script>

</body>

</html>